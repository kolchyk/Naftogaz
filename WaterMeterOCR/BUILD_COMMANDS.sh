#!/bin/bash

# ============================================
# WaterMeterOCR - –°–±–æ—Ä–∫–∞ –∏ –¢–µ—Å—Ç –ö–æ–º–∞–Ω–¥—ã
# ============================================

# 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
echo "üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ npm –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π..."
npm install

# 2. –ó–∞–ø—É—Å–∫ Jest —Ç–µ—Å—Ç–æ–≤ (JavaScript/TypeScript)
echo "üß™ –ó–∞–ø—É—Å–∫ Jest unit —Ç–µ—Å—Ç–æ–≤..."
npm test

# 3. –ü–µ—Ä–µ—Ö–æ–¥ –≤ Android –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd android

# 4. –°–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å ML Kit
echo "üî® –°–±–æ—Ä–∫–∞ ML Kit Debug –≤–∞—Ä–∏–∞–Ω—Ç–∞..."
./gradlew buildMlkitDebug

# 5. Unit —Ç–µ—Å—Ç—ã Android
echo "üß™ –ó–∞–ø—É—Å–∫ Android unit —Ç–µ—Å—Ç–æ–≤..."
./gradlew testMlkitDebugUnitTest

# 6. Integration —Ç–µ—Å—Ç—ã (—Ç—Ä–µ–±—É–µ—Ç —ç–º—É–ª—è—Ç–æ—Ä/—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ)
echo "üß™ –ó–∞–ø—É—Å–∫ Android integration —Ç–µ—Å—Ç–æ–≤..."
./gradlew connectedMlkitDebugAndroidTest

# 7. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (—Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ)
echo "üì± –£—Å—Ç–∞–Ω–æ–≤–∫–∞ APK –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ..."
./gradlew installMlkitDebug

# 8. Release —Å–±–æ—Ä–∫–∞
echo "üì¶ –°–±–æ—Ä–∫–∞ Release –≤–∞—Ä–∏–∞–Ω—Ç–∞..."
./gradlew buildMlkitRelease

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

# –¢–æ–ª—å–∫–æ —Å–±–æ—Ä–∫–∞ –±–µ–∑ —Ç–µ—Å—Ç–æ–≤
# ./gradlew buildMlkitDebug -x test

# –û—á–∏—Å—Ç–∫–∞ –∏ –ø–µ—Ä–µ—Å—Ç—Ä–æ–µ–Ω–∏–µ
# ./gradlew clean buildMlkitDebug

# –° –¥–µ—Ç–∞–ª—å–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
# ./gradlew buildMlkitDebug --info

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
# ./gradlew dependencies

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —ç–º—É–ª—è—Ç–æ—Ä–µ (–∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞)
# npm run android

echo "‚úÖ –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã!"
